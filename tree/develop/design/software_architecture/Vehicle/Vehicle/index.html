
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://tier4.github.io/autoware.proj/design/software_architecture/Vehicle/Vehicle/">
      
      <link rel="icon" href="../../../../images/tier4.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Vehicle - Autoware Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../../../../css/tier4_color.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vehicle" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Autoware Documentation" class="md-header__button md-logo" aria-label="Autoware Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Autoware Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Vehicle
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/tier4/autoware.proj/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Autoware Documentation" class="md-nav__button md-logo" aria-label="Autoware Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Autoware Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/tier4/autoware.proj/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorial/Requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorial/HowToInstall/" class="md-nav__link">
        How to install
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          How to run
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="How to run" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          How to run
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorial/QuickStart/" class="md-nav__link">
        Quick start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tutorial/SimulationTutorial/" class="md-nav__link">
        Simulation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Design
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Design" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Design
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../apis/ja/concept/" class="md-nav__link">
        Concept
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../apis/ja/list/" class="md-nav__link">
        List
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1_3" type="checkbox" id="__nav_3_1_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1_3">
          Proposal
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Proposal" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_1_3">
          <span class="md-nav__icon md-icon"></span>
          Proposal
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../apis/ja/state/" class="md-nav__link">
        State
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Architecture
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Architecture" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Architecture
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Sensing/Sensing/" class="md-nav__link">
        Sensing
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_3" type="checkbox" id="__nav_3_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_3">
          Localization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Localization" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          Localization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Localization/Localization/" class="md-nav__link">
        Overall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Localization/PoseEstimator/PoseEstimator/" class="md-nav__link">
        Pose estimator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Localization/TwistEstimator/TwistEstimator/" class="md-nav__link">
        Twist estimator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Localization/PoseTwistFusionFilter/PoseTwistFusionFilter/" class="md-nav__link">
        Pose twist fusion filter
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_4" type="checkbox" id="__nav_3_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_4">
          Perception
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Perception" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_4">
          <span class="md-nav__icon md-icon"></span>
          Perception
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Perception/Perception/" class="md-nav__link">
        Overall
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_4_2" type="checkbox" id="__nav_3_2_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_4_2">
          Object recognition
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Object recognition" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_4_2">
          <span class="md-nav__icon md-icon"></span>
          Object recognition
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Perception/ObjectRecognition/Detection/Detection/" class="md-nav__link">
        Detection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Perception/ObjectRecognition/Tracking/Tracking/" class="md-nav__link">
        Tracking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Perception/ObjectRecognition/Prediction/Prediction/" class="md-nav__link">
        Prediction
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_4_3" type="checkbox" id="__nav_3_2_4_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_4_3">
          Traffic light recognition
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Traffic light recognition" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_4_3">
          <span class="md-nav__icon md-icon"></span>
          Traffic light recognition
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Perception/TrafficLightRecognition/Detection/Detection/" class="md-nav__link">
        Detection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Perception/TrafficLightRecognition/Classification/Classification/" class="md-nav__link">
        Classification
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_5" type="checkbox" id="__nav_3_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_5">
          Planning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Planning" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_5">
          <span class="md-nav__icon md-icon"></span>
          Planning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Planning/Planning/" class="md-nav__link">
        Overall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Planning/ScenarioSelector/ScenarioSelector/" class="md-nav__link">
        Scenario selector
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_5_3" type="checkbox" id="__nav_3_2_5_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_5_3">
          Lane driving Scenario
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Lane driving Scenario" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_5_3">
          <span class="md-nav__icon md-icon"></span>
          Lane driving Scenario
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Planning/LaneDriving/LaneDrivingScenario/" class="md-nav__link">
        Overall
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Planning/LaneDriving/Behavior/LaneChangePlanner/" class="md-nav__link">
        Behavior path planning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Planning/LaneDriving/Behavior/BehaviorVelocityPlanner/" class="md-nav__link">
        Behavior velocity planning
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Planning/Parking/ParkingScenario/" class="md-nav__link">
        Parking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Planning/DesignRationale/" class="md-nav__link">
        Design rationale
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_6" type="checkbox" id="__nav_3_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_6">
          Control
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Control" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_2_6">
          <span class="md-nav__icon md-icon"></span>
          Control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Control/Control/" class="md-nav__link">
        Overall
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2_6_2" type="checkbox" id="__nav_3_2_6_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2_6_2">
          Trajectory follower
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Trajectory follower" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_2_6_2">
          <span class="md-nav__icon md-icon"></span>
          Trajectory follower
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Control/TrajectoryFollower/LateralController/" class="md-nav__link">
        Lateral controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Control/TrajectoryFollower/LongitudinalController/" class="md-nav__link">
        Longitudinal controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Control/TrajectoryFollower/LatLonCoupler/" class="md-nav__link">
        Lateral longitudinal coupler
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Control/VehicleCmdGate/VehicleCmdGate/" class="md-nav__link">
        Vehicle cmd gate
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Vehicle
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Vehicle
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#role" class="md-nav__link">
    Role
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumption" class="md-nav__link">
    Assumption
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    Use Cases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirement" class="md-nav__link">
    Requirement
  </a>
  
    <nav class="md-nav" aria-label="Requirement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vehicle-control-with-desired-steering-and-velocityacceleration-for-type-a" class="md-nav__link">
    Vehicle control with desired steering and velocity/acceleration (for type A)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-control-with-the-desired-actuation-command-for-type-b" class="md-nav__link">
    Vehicle control with the desired actuation command (for type B)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shift-control" class="md-nav__link">
    Shift control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-signal-control" class="md-nav__link">
    Turn signal control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input" class="md-nav__link">
    Input
  </a>
  
    <nav class="md-nav" aria-label="Input">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-messages" class="md-nav__link">
    Internal Messages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design" class="md-nav__link">
    Design
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vehicle-interface" class="md-nav__link">
    Vehicle Interface
  </a>
  
    <nav class="md-nav" aria-label="Vehicle Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role_1" class="md-nav__link">
    Role
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input_1" class="md-nav__link">
    Input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output_1" class="md-nav__link">
    Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raw-vehicle-cmd-converter" class="md-nav__link">
    Raw Vehicle Cmd Converter
  </a>
  
    <nav class="md-nav" aria-label="Raw Vehicle Cmd Converter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role_2" class="md-nav__link">
    Role
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input_2" class="md-nav__link">
    Input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output_2" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-design-a-new-vehicle-interface" class="md-nav__link">
    How to design a new vehicle interface
  </a>
  
    <nav class="md-nav" aria-label="How to design a new vehicle interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-type-a" class="md-nav__link">
    For type A
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-type-b" class="md-nav__link">
    For type B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-make-an-conversion-map-for-type-b" class="md-nav__link">
    How to make an conversion map (for type B)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-of-additional-elements-such-as-turn-signals" class="md-nav__link">
    Control of additional elements, such as turn signals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Map/Map/" class="md-nav__link">
        Map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../TF/" class="md-nav__link">
        TF
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NamingConvention/" class="md-nav__link">
        Naming convention
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ForDevelopers/" class="md-nav__link">
        For developers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../NodeDiagram/" class="md-nav__link">
        Node diagram
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../repository/Repository/" class="md-nav__link">
        Repository
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release/Release/" class="md-nav__link">
        Release
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          DeveloperGuide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DeveloperGuide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          DeveloperGuide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../developer_guide/CodingGuideline/" class="md-nav__link">
        Coding guideline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../developer_guide/PullRequestGuideline/" class="md-nav__link">
        Pull request guideline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../developer_guide/UnitTestGuideline/" class="md-nav__link">
        Unit test guideline
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../developer_guide/ClangTidyGuideline/" class="md-nav__link">
        Clang-Tidy guideline
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_5">
          Knowhow
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Knowhow" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Knowhow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../developer_guide/knowhow/PortingToROS2/" class="md-nav__link">
        Porting ROS1 code to ROS2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          License/Credit
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="License/Credit" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          License/Credit
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Credits/" class="md-nav__link">
        Credits
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../License/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#role" class="md-nav__link">
    Role
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumption" class="md-nav__link">
    Assumption
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    Use Cases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirement" class="md-nav__link">
    Requirement
  </a>
  
    <nav class="md-nav" aria-label="Requirement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vehicle-control-with-desired-steering-and-velocityacceleration-for-type-a" class="md-nav__link">
    Vehicle control with desired steering and velocity/acceleration (for type A)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vehicle-control-with-the-desired-actuation-command-for-type-b" class="md-nav__link">
    Vehicle control with the desired actuation command (for type B)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shift-control" class="md-nav__link">
    Shift control
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-signal-control" class="md-nav__link">
    Turn signal control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#input" class="md-nav__link">
    Input
  </a>
  
    <nav class="md-nav" aria-label="Input">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-messages" class="md-nav__link">
    Internal Messages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design" class="md-nav__link">
    Design
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vehicle-interface" class="md-nav__link">
    Vehicle Interface
  </a>
  
    <nav class="md-nav" aria-label="Vehicle Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role_1" class="md-nav__link">
    Role
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input_1" class="md-nav__link">
    Input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output_1" class="md-nav__link">
    Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raw-vehicle-cmd-converter" class="md-nav__link">
    Raw Vehicle Cmd Converter
  </a>
  
    <nav class="md-nav" aria-label="Raw Vehicle Cmd Converter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#role_2" class="md-nav__link">
    Role
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input_2" class="md-nav__link">
    Input
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output_2" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-design-a-new-vehicle-interface" class="md-nav__link">
    How to design a new vehicle interface
  </a>
  
    <nav class="md-nav" aria-label="How to design a new vehicle interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-type-a" class="md-nav__link">
    For type A
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-type-b" class="md-nav__link">
    For type B
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-make-an-conversion-map-for-type-b" class="md-nav__link">
    How to make an conversion map (for type B)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-of-additional-elements-such-as-turn-signals" class="md-nav__link">
    Control of additional elements, such as turn signals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/tier4/autoware.proj/edit/main/docs/design/software_architecture/Vehicle/Vehicle.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="vehicle">Vehicle<a class="headerlink" href="#vehicle" title="Permanent link">#</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">#</a></h2>
<p><img alt="Vehicle_design_typeA&amp;B" src="../image/VehicleStack.drawio.svg" /></p>
<p>Vehicle stack is an interface between Autoware and vehicle. This layer converts signals from Autoware to vehicle-specific, and vice versa.
This module needs to be designed according to the vehicle to be used. How to implement a new interface is described <a href="#how-to-design-a-new-vehicle-interface">below.</a></p>
<h2 id="role">Role<a class="headerlink" href="#role" title="Permanent link">#</a></h2>
<p>There are two main roles of Vehicle stack:</p>
<ul>
<li><strong>Conversion of Autoware commands to a vehicle-specific format</strong></li>
<li><strong>Conversion of vehicle status in a vehicle-specific format to Autoware messages</strong></li>
</ul>
<h2 id="assumption">Assumption<a class="headerlink" href="#assumption" title="Permanent link">#</a></h2>
<p>It is assumed that the vehicle has one of the following control interfaces.</p>
<p><strong>Type A. target steering and target velocity/acceleration interface.</strong></p>
<p><strong>Type B. generalized target command interface (e.g. accel/brake pedal, steering torque).</strong></p>
<p>The use case and requirements change according to this type.</p>
<h2 id="use-cases">Use Cases<a class="headerlink" href="#use-cases" title="Permanent link">#</a></h2>
<p>Vehicle stack supports the following use cases.</p>
<ul>
<li>Speed control with desired velocity or acceleration (for type A only)</li>
<li>Steering control with desired steering angle and/or steering angle velocity (for type A only)</li>
<li>Speed control with desired actuation commands (for type B only)</li>
<li>Steering control with desired actuation commands (for type B only)</li>
<li>Shift control (for both)</li>
<li>Turn signal control (for both)</li>
</ul>
<h2 id="requirement">Requirement<a class="headerlink" href="#requirement" title="Permanent link">#</a></h2>
<p>To achieve the above use case, the vehicle stack requires the following conditions.</p>
<h3 id="vehicle-control-with-desired-steering-and-velocityacceleration-for-type-a">Vehicle control with desired steering and velocity/acceleration (for type A)<a class="headerlink" href="#vehicle-control-with-desired-steering-and-velocityacceleration-for-type-a" title="Permanent link">#</a></h3>
<ul>
<li>The vehicle can be controlled in longitudinal direction by the target velocity or acceleration.</li>
<li>The vehicle can be controlled in lateral direction by the target steering.</li>
<li>The output to the vehicle includes desired velocity or acceleration in a vehicle-specific format.</li>
<li>The output to the vehicle includes desired steering in a vehicle-specific format.</li>
</ul>
<h3 id="vehicle-control-with-the-desired-actuation-command-for-type-b">Vehicle control with the desired actuation command (for type B)<a class="headerlink" href="#vehicle-control-with-the-desired-actuation-command-for-type-b" title="Permanent link">#</a></h3>
<ul>
<li>The vehicle can be controlled in longitudinal direction by the specific target command (e.g. accel/brake pedal)</li>
<li>The vehicle can be controlled in lateral direction by the specific target command (e.g. steering torque)</li>
<li>The output to the vehicle includes desired target command in a vehicle-specific format.</li>
</ul>
<h3 id="shift-control">Shift control<a class="headerlink" href="#shift-control" title="Permanent link">#</a></h3>
<ul>
<li>The vehicle can be controlled by the target shift mode.</li>
<li>The input vehicle command includes the desired shift.</li>
<li>The output to the vehicle includes the desired shift in a vehicle-specific format.</li>
</ul>
<h3 id="turn-signal-control">Turn signal control<a class="headerlink" href="#turn-signal-control" title="Permanent link">#</a></h3>
<ul>
<li>The vehicle can be controlled by the target turn signal mode.</li>
<li>The input vehicle command includes the desired turn signal.</li>
<li>The output to the vehicle includes the desired turn signal in a vehicle-specific format.</li>
</ul>
<h2 id="input">Input<a class="headerlink" href="#input" title="Permanent link">#</a></h2>
<p>The input to Vehicle stack:</p>
<table>
<thead>
<tr>
<th>Input</th>
<th>Topic(Data Type)</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vehicle Command</td>
<td><code>/control/vehicle_cmd</code><br>(<code>autoware_vehicle_msgs/VehicleCommand</code>)</td>
<td>Table Below</td>
</tr>
</tbody>
</table>
<p>The detailed contents in Vehicle Command are as follows.</p>
<table>
<thead>
<tr>
<th>Input</th>
<th>Data Type</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Velocity</td>
<td>std_msgs/Float64</td>
<td>Target velocity [m/s]</td>
</tr>
<tr>
<td>Acceleration</td>
<td>std_msgs/Float64</td>
<td>Target acceleration [m/s2]</td>
</tr>
<tr>
<td>Steering angle</td>
<td>std_msgs/Float64</td>
<td>Target steering angle [rad]</td>
</tr>
<tr>
<td>Steering angle velocity</td>
<td>std_msgs/Float64</td>
<td>Target steering angle velocity [rad/s]</td>
</tr>
<tr>
<td>Gear shifting command</td>
<td>std_msgs/Int32</td>
<td>Target Gear shift</td>
</tr>
<tr>
<td>Emergency command</td>
<td>std_msgs/Int32</td>
<td>Emergency status of Autoware</td>
</tr>
</tbody>
</table>
<h3 id="output">Output<a class="headerlink" href="#output" title="Permanent link">#</a></h3>
<p>There are two types of outputs from Vehicle stack: vehicle status to Autoware and a control command to the vehicle.</p>
<p>The table below summarizes the output from Vehicle stack:</p>
<table>
<thead>
<tr>
<th>Output (to Autoware)</th>
<th>Topic(Data Type)</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>velocity status</td>
<td><code>/vehicle/status/twist</code><br>(<code>geometry_msgs/TwistStamped</code>)</td>
<td>vehicle velocity status to Autoware [m/s]</td>
</tr>
<tr>
<td>steering status (optional)</td>
<td><code>/vehicle/status/steering</code><br>(<code>autoware_vehicle_msgs/Steering</code>)</td>
<td>vehicle steering status to Autoware [rad]</td>
</tr>
<tr>
<td>shift status (optional)</td>
<td><code>/vehicle/status/Shift</code><br>(<code>autoware_vehicle_msgs/ShiftStamped</code>)</td>
<td>vehicle shift to Autoware [-]</td>
</tr>
<tr>
<td>turn signal status (optional)</td>
<td><code>/vehicle/status/turn_signal</code><br>(<code>autoware_vehicle_msgs/TurnSignal</code>)</td>
<td>vehicle turn signal status to Autoware [m/s]</td>
</tr>
<tr>
<td>actuation status (optional)</td>
<td><code>/vehicle/status/actuation_status</code><br>(<code>autoware_vehicle_msgs/ActuationStatusStamped</code>)</td>
<td>vehicle actuation status to Autoware [m/s]</td>
</tr>
</tbody>
</table>
<p>The output to the vehicle depends on each vehicle interface.</p>
<table>
<thead>
<tr>
<th>Output (to vehicle)</th>
<th>Topic(Data Type)</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>vehicle control messages</td>
<td>Depends on each vehicle</td>
<td>Control signals to drive the vehicle</td>
</tr>
</tbody>
</table>
<h3 id="internal-messages">Internal Messages<a class="headerlink" href="#internal-messages" title="Permanent link">#</a></h3>
<p>If the vehicle does not support the TypeA interface (steering angle and velocity/acceleration), the following actuation command/status are used. These message is defined according to the interface for each vehicle, and the raw vehicle command converter is responsible for the conversion between the output from the autoware control module and the actuation message.</p>
<table>
<thead>
<tr>
<th>Input</th>
<th>Data Type</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>accel_cmd</td>
<td>std_msgs/Float64</td>
<td>Vehicle-specific commands to accelerate the vehicle.</td>
</tr>
<tr>
<td>brake_cmd</td>
<td>std_msgs/Float64</td>
<td>Vehicle-specific commands to decelerate the vehicle.</td>
</tr>
<tr>
<td>steer_cmd</td>
<td>std_msgs/Float64</td>
<td>Vehicle-specific commands to control the vehicle steering.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Output</th>
<th>Data Type</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>accel_status</td>
<td>std_msgs/Float64</td>
<td>Status of the accel-actuator corresponding to the actuation command (e.g. accel pedal)</td>
</tr>
<tr>
<td>brake_status</td>
<td>std_msgs/Float64</td>
<td>Status of the brake-actuator corresponding to the actuation command (e.g. brake pedal)</td>
</tr>
<tr>
<td>steer_status</td>
<td>std_msgs/Float64</td>
<td>Status of the steering-actuator corresponding to the actuation command (e.g. steering torque)</td>
</tr>
</tbody>
</table>
<h2 id="design">Design<a class="headerlink" href="#design" title="Permanent link">#</a></h2>
<ul>
<li>For vehicles of the type controlled by the target velocity or acceleration (type A)</li>
<li>For vehicles of the type controlled by the target accel, brake and steer commands (type B)</li>
</ul>
<p><img alt="Vehicle_design_typeA&amp;B" src="../image/VehicleInterfaceDesign.drawio.svg" /></p>
<h2 id="vehicle-interface">Vehicle Interface<a class="headerlink" href="#vehicle-interface" title="Permanent link">#</a></h2>
<h3 id="role_1">Role<a class="headerlink" href="#role_1" title="Permanent link">#</a></h3>
<p>To convert Autoware control messages to vehicle-specific format, and generate vehicle status messages from vehicle-specific format.</p>
<h3 id="input_1">Input<a class="headerlink" href="#input_1" title="Permanent link">#</a></h3>
<ul>
<li>Vehicle Command (<code>autoware_vehicle_msgs/VehicleCommand</code>) (type A only)<ul>
<li>includes target velocity, acceleration, steering angle, steering angle velocity, gear shift, and emergency.</li>
</ul>
</li>
<li>Actuation Command (<code>autoware_vehicle_msgs/ActuationCommandStamped</code>) (type B only)<ul>
<li>includes target accel_cmd, brake_cmd, steer_cmd.</li>
</ul>
</li>
<li>Turn signal (<code>autoware_vehicle_msgs/TurnSignal</code>) (optional)</li>
</ul>
<h3 id="output_1">Output<a class="headerlink" href="#output_1" title="Permanent link">#</a></h3>
<ul>
<li>Velocity status (<code>geometry_msgs/TwistStamped</code>)</li>
<li>Steering status (<code>autoware_vehicle_msgs/Steering</code>) (optional)</li>
<li>Shift status (<code>autoware_vehicle_msgs/ShiftStamped</code>) (optional)</li>
<li>Turn signal status (<code>autoware_vehicle_msgs/TurnSignal</code>) (optional)</li>
<li>Actuation Status (<code>autoware_vehicle_msgs/ActuationStatusStamped</code>) (optional)</li>
</ul>
<p>NOTE: Lane driving is possible without the optional part. Design vehicle interface according to the purpose.</p>
<h2 id="raw-vehicle-cmd-converter">Raw Vehicle Cmd Converter<a class="headerlink" href="#raw-vehicle-cmd-converter" title="Permanent link">#</a></h2>
<h3 id="role_2">Role<a class="headerlink" href="#role_2" title="Permanent link">#</a></h3>
<p>To convert the target acceleration to the actuation commands with the given conversion map. This node is used only for the case of vehicle type B.</p>
<h3 id="input_2">Input<a class="headerlink" href="#input_2" title="Permanent link">#</a></h3>
<ul>
<li>Vehicle Command (<code>autoware_vehicle_msgs/VehicleCommand</code>)</li>
<li>Current velocity (<code>geometry_msgs/TwistStamped</code>)</li>
</ul>
<h3 id="output_2">Output<a class="headerlink" href="#output_2" title="Permanent link">#</a></h3>
<ul>
<li>Actuation Command (<code>autoware_vehicle_msgs/ActuationCommandStamped</code>)<ul>
<li>includes target accel_cmd, brake_cmd, steer_cmd.</li>
</ul>
</li>
</ul>
<h3 id="how-to-design-a-new-vehicle-interface">How to design a new vehicle interface<a class="headerlink" href="#how-to-design-a-new-vehicle-interface" title="Permanent link">#</a></h3>
<h4 id="for-type-a">For type A<a class="headerlink" href="#for-type-a" title="Permanent link">#</a></h4>
<p>Create a module that satisfies the following two requirements</p>
<ul>
<li>Receives <code>autoware_vehicle_msg/VehicleCommand</code> and sends control commands to the vehicle.</li>
<li>Converts the information from the vehicle, publishes vehicle speed to Autoware with <code>geometry_msgs/TwistStamped</code>.</li>
</ul>
<p>For example, if the vehicle has an interface to be controlled with a target velocity, the velocity in <code>autoware_vehicle_msg/VehicleCommand</code> is sent to the vehicle as the target velocity. If the vehicle control interface is steering wheel angle, it is necessary to convert steering angle to steering wheel angle in this vehicle_interface.</p>
<h4 id="for-type-b">For type B<a class="headerlink" href="#for-type-b" title="Permanent link">#</a></h4>
<p>Since <code>autoware_vehicle_msg/VehicleCommand</code> contains only the target steering, velocity and acceleration, you need to convert these values for the vehicle-specific interface. In this case, use the <code>RawVehicleCmdConverter</code>. The <code>RawVehicleCmdConverter</code> converts the <code>VehicleCommand</code> to the <code>ActuationCommand</code> which is specific to each vehicle based on the given conversion map. You need to create this conversion map in advance from vehicle data sheets and experiments.</p>
<p>With the use of <code>RawVehicleCmdConverter</code>, you need to create a module that satisfies the following two requirements</p>
<ul>
<li>Receives <code>autoware_vehicle_msg/ActuationCommandStamped</code> and sends control commands to the vehicle.</li>
<li>Converts the information from the vehicle, publishes vehicle speed to Autoware with <code>geometry_msgs/TwistStamped</code>.</li>
</ul>
<h4 id="how-to-make-an-conversion-map-for-type-b">How to make an conversion map (for type B)<a class="headerlink" href="#how-to-make-an-conversion-map-for-type-b" title="Permanent link">#</a></h4>
<p>When using the <code>RawVehicleCmdConverter</code> described above, it is necessary to create an conversion map for each vehicle. The conversion map is data in CSV format. In the case of conversion between accel pedal and acceleration, it describes how much acceleration is produced when the accel command is on in each vehicle speed range. You can find the default conversion map data in <code>src/vehicle/raw_vehicle_cmd_converter/data</code> as a reference. In the CSV data, the horizontal axis is the current velocity [m/s], the vertical axis is the vehicle-specific command value [-], and the element is the acceleration [m/ss] as described below.</p>
<p><img alt="Vehicle_accel_map_description" src="../image/VehicleAccelMapDescription.png" /></p>
<p>This is the reference data created by TierIV with the following steps.</p>
<ul>
<li>Press the command to a constant value on a flat road to accelerate/decelerate the vehicle.</li>
<li>Save IMU acceleration and vehicle velocity data during acceleration/deceleration.</li>
<li>Create a CSV file with the relationship between command values and acceleration at each vehicle speed.</li>
</ul>
<p>After your acceleration map is created, load it when <code>RawVehicleCmdConverter</code> is launched (the file path is defined at the launch file).</p>
<h4 id="control-of-additional-elements-such-as-turn-signals">Control of additional elements, such as turn signals<a class="headerlink" href="#control-of-additional-elements-such-as-turn-signals" title="Permanent link">#</a></h4>
<p>If you need to control parts that are not related to the vehicle drive (turn signals, doors, window opening and closing, headlights, etc.), the vehicle interface will handle them separately. The current Autoware supports and implements only turn signals.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../Control/VehicleCmdGate/VehicleCmdGate/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Vehicle cmd gate" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Vehicle cmd gate
            </div>
          </div>
        </a>
      
      
        
        <a href="../../Map/Map/" class="md-footer__link md-footer__link--next" aria-label="Next: Map" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Map
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Tier IV, Inc.
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.b1047164.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>